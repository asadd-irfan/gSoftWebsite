if (self.CavalryLogger) { CavalryLogger.start_js(["z7e\/d"]); }

__d("CometNewsFeedVPVDStore_newsFeedEdge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"CometNewsFeedVPVDStore_newsFeedEdge"};e.exports=a}),null);
__d("CometInteractionSourceContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext(10);e.exports=a}),null);
__d("CometNewsFeedVPVDStore",["CircularBuffer","CometRelay","React","emptyFunction","CometNewsFeedVPVDStore_newsFeedEdge.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("CometRelay").graphql;var h=b("CometRelay").readInlineData,i=b("React").useCallback,j=b("React").useContext;c=function(){__p&&__p();var a=new(b("CircularBuffer"))(50);return{readRecentVPVDs:function(){var b=a.read();a.clear();return b},writeRecentVPVD:function(c,d){var e=h(g||(g=function(){return b("CometNewsFeedVPVDStore_newsFeedEdge.graphql")}),c);c=a.read().find(function(a){var b;a=a.vsid;return(e==null?void 0:(b=e.feed_backend_data)==null?void 0:b.vsid)===a});if(c)return;a.write({evt:"vpv",fetch_tracking:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.should_recent_vpv_fetch_tracking_data,original_qid:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.original_qid,qid:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.qid,timestamp:d,vsid:e==null?void 0:(c=e.feed_backend_data)==null?void 0:c.vsid,vspos:e==null?void 0:(d=e.feed_backend_data)==null?void 0:d.vspos})}}};var k=b("React").createContext(),l=b("React").createContext(b("emptyFunction"));function a(a){var c=a.newsFeedEdge;a=a.children;var d=j(k),e=i(function(a){d&&d.writeRecentVPVD(c,a)},[c,d]);return b("React").createElement(l.Provider,{value:e},a)}e.exports={LoggerContext:l,LoggerProvider:a,StoreProvider:k.Provider,createStore:c}}),null);
__d("InteractionSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOP_NEWS:0,FRIEND_LIST:1,TICKER:2,TIMELINE:3,GROUPS:4,APPS_AND_GAMES:5,PHOTOS:6,LINKS:7,PERMALINK:8,LOCKFEED:9,UNKNOWN_INTERACTION_SOURCE:10,COMMENT_POPOVER:11,VPV_FORCED:12,BEST_FEED:13,UNSEEN_FEED:14,PIVOTS:15,SHARED_OBJECT:16,PAPER:17,NOTIFICATIONS:18,RECENT_VPVS_GRAPHQL_FILTER:19,EXPLORE_FEED:20,PAGE_STORIES_YOU_MISSED:21,REDSPACE:22,VH_LIVE:23,GROUP_TOP_STORIES:24,GROUPS_INBOX:25,COMMENT_VPVD:26,PAGES:27,VIDEO_FULLSCREEN_PLAYER:28,VIDEO_HOME:29,RECENT_COMMENT_VPV:30,PHOTOS_PREVIEW:31,SEEN_FEED:32,MEMORIES_HOME:33,CUSTOM_FEED:34,SNOWFLAKE:35,FB_STORIES:36,SNOWFLAKE_MEDIAS:37,PHOTOS_PREVIEW_UNDER_SHARED_OBJECT:38,QUICK_PROMOTION_OBJECT:39,LASSO:40,SEARCH_VOYAGER:41,BUSINESS_FEED:42,CRS:43,PAGE_VIDEO_THUMBNAIL:44,VIDEO_CATALOG_THUMBNAIL:45,MESSENGER_VIDEO:46,PERMALINK_OR_PHOTO_CHAINING:47,FB_STORIES_BUCKET:48,TAO_WATCHED_VIDEOS:49,TAO_WATCHED_SHOW_VIDEOS_WITH_POSITION:50,TAO_EVER_WATCHED_SHOW_VIDEOS:51,GAMES_FEED:52,GROUPS_TAB:53,VIDEO_CHAINING:54,END_OF_FEED:55,CRISIS_PAGE:56,SHOWCASE_OBJECT:57,SHOWCASE_UNIT:58,TAHOE_ENDSCREEN_SUGGESTED_VIDEOS:59,FRIEND_DEEP_DIVE:60,MAX_INTERACTION_SOURCE:61})}),null);
__d("useStoryVPVDLogger",["requireDeferred","CometInteractionSourceContext","CometNewsFeedVPVDStore","InteractionSource","React","gkx","useVPVDImpression"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("requireDeferred")("Banzai"),h=b("requireDeferred")("CometFeedVpvdTestFalcoEvent"),i=b("React").useCallback,j=b("React").useContext,k=b("React").useRef,l=Object.keys(b("InteractionSource")).reduce(function(a,c){a[b("InteractionSource")[c]]=c;return a},{}),m=function(a){var b;return{csp:a.storyPosition,source:a.source,story_height:a.story_height,storyId:a.id,vpvd_start_timestamp_ms:a.visibleTime,vpvd_time_delta_ms:a.hiddenTime-((b=a.visibleTime)!=null?b:0),xt:a.encrypted_tracking}};function a(a,c,d){__p&&__p();var e=(d=d)!=null?d:j(b("CometInteractionSourceContext"));d=l[e];var f="STORYID-"+c+"-"+d+"-"+(a||"").slice(0,15),n=j(b("CometNewsFeedVPVDStore").LoggerContext),o=k(null);d=i(function(a){var b=a.entry;a=a.visibleTime;n(a);o.current=(b=b==null?void 0:(a=b.boundingClientRect)==null?void 0:a.height)!=null?b:null},[n]);var p=i(function(b){__p&&__p();var d,i=b.hiddenTime;b.visibleDuration;b=b.visibleTime;var j=o.current!=null?Math.round(o.current):null,k=m({encrypted_tracking:(d=a)!=null?d:"",hiddenTime:i,id:f,source:e,story_height:j,storyPosition:c,visibleTime:b});g.onReady(function(a){a.post("comet_metrics:vpvd",k)});h.onReady(function(a){a=a.log;a(function(){return{is_comet:!0,story_height:j,story_id:f}})})},[e,f,c,a]);return b("useVPVDImpression")({onVPVDEnd:p,onVPVDStart:d})}e.exports=a}),null);
__d("useImpressionLogger",["CometViewportMarginsContext","React","getIntersectionMarginFromViewportMargin","intersectionObserverEntryIsIntersecting","useIntersectionObserver"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("React").useRef;function a(a,c){__p&&__p();var d=h(b("CometViewportMarginsContext")),e=i(!1),f=g(function(d){__p&&__p();d=b("intersectionObserverEntryIsIntersecting")(d);if(e.current!==d){e.current=d;if(e.current){var f=new Date();e.current=!0;a.onReady(function(a){c(a,f)})}}},[c,a]);return b("useIntersectionObserver")(f,{root:null,rootMargin:b("getIntersectionMarginFromViewportMargin")(d),threshold:0})}e.exports=a}),null);
__d("VideoActionLink.react",["cx","CenteredContainer.react","Image.react","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c="_2a_c";a.imageClass!=null&&(c=b("joinClasses")(c,a.imageClass));return b("React").createElement(b("Link.react"),{className:"_2pi9",href:a.href,onClick:a.onClick,rel:a.rel,role:"button"},b("React").createElement("div",{className:"_2a_3"},b("React").createElement("div",{className:"_2a_5"}),b("React").createElement("div",{className:c},b("React").createElement(b("Image.react"),{src:a.imageSrc,size:"24"}))),b("React").createElement("div",{className:"_63kv"},b("React").createElement(b("CenteredContainer.react"),{horizontal:!1,fullHeight:!0,vertical:!0},a.text)))}e.exports=a}),null);
__d("VideoReshareLink.react",["ix","cx","fbt","React","VideoActionLink.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";function a(a){return b("React").createElement(b("VideoActionLink.react"),{href:a.shareURI,imageClass:"_2a_f",imageSrc:g("115553"),rel:"dialog",text:i._("Share")})}e.exports=a}),null);
__d("VideoWatchAgainLink.react",["ix","cx","fbt","React","VideoActionLink.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.vpc.clickVideo()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").createElement(b("VideoActionLink.react"),{imageClass:"_2a_d",imageSrc:g("115481"),onClick:this.$1,text:i._("Watch Again")})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("VideoEndScreenWithActions.react",["cx","CenteredContainer.react","CSS","List.react","React","SubscriptionsHandler","VideoReshareLink.react","VideoWatchAgainLink.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={playerState:"",isInTahoe:c.props.vpc.getSource()==="tahoe"},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(this.props.vpc.addListener("stateChange",function(){return a.setState({playerState:a.props.vpc.getState()})}));this.$1.addSubscriptions(this.props.vpc.addListener("TahoeController/exitTahoe",function(){a.setState({isInTahoe:!1})}));this.$1.addSubscriptions(this.props.vpc.addListener("TahoeController/enterTahoe",function(){a.setState({isInTahoe:!0})}))};d.render=function(){__p&&__p();var a=this.props.vpc;if(!a||a.getSource()!=="inline"||this.state.isInTahoe||this.state.playerState==="destroyed")return null;a=a.getRootNode();if(this.state.playerState!=="finished"){b("CSS").addClass(a,"_2a_0");return null}b("CSS").removeClass(a,"_2a_0");return b("React").createElement(b("CenteredContainer.react"),{className:"_2a_1",fullHeight:!0,vertical:!0},b("React").createElement(b("List.react"),{border:"none",className:this.state.playerState!=="finished"?"hidden_elem":""},b("React").createElement("li",{className:"_2a_2"},b("React").createElement(b("VideoWatchAgainLink.react"),{vpc:this.props.vpc})),this.props.shareURI?b("React").createElement("li",{className:"_2a_2"},b("React").createElement(b("VideoReshareLink.react"),{shareURI:this.props.shareURI})):null))};d.componentWillUnmount=function(){this.$1.release()};return c}(b("React").Component);e.exports=a}),null);